{"version":3,"sources":["assets/InfiniteHeights/scripts/Game/InfiniteHeights.GameView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport GameManager from \"../InfiniteHeights.GameManager\";\nimport { Global } from \"../InfiniteHeights.Global\";\nimport BackGround from \"./InfiniteHeights.BackGround\";\nimport Ballon from \"./InfiniteHeights.Ballon\";\nimport GameOver from \"./InfiniteHeights.GameOver\";\nimport obstacleManager from \"./InfiniteHeights.ObstacleManager\";\nimport Pause from \"./InfiniteHeights.Pause\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class GameView extends cc.Component {\n\n    public static instance: GameView = null;\n    @property(cc.Node)\n    nObstacle: cc.Node = null;\n    // @property(cc.Node)\n    // nObstacle_2: cc.Node = null;\n    @property(cc.Prefab)\n    listPrfObstacle: cc.Prefab[] = [];\n    @property(cc.Prefab)\n    prfBackGround: cc.Prefab = null;\n    @property(cc.Node)\n    nBgGame: cc.Node = null;\n    @property(cc.Prefab)\n    prfBallon: cc.Prefab = null;\n    @property(cc.Node)\n    nBallon: cc.Node = null;\n    @property(cc.Node)\n    listBg: cc.Node[] = [];\n\n    @property(cc.Label)\n    lbDiamond: cc.Label = null;\n\n    @property(cc.Label)\n    lbTime: cc.Label = null;\n\n    @property(cc.Label)\n    lbScore: cc.Label = null;\n    @property(cc.Prefab)\n    prfGameOver: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    prfPause: cc.Prefab = null;\n    @property(cc.Node)\n    hands: cc.Node = null;\n\n    @property(cc.Label)\n    lbTimeResume: cc.Label = null;\n    time = 0;\n    timeResume = 4;\n    isFirstTouch = false;\n    isGameOver = false;\n    ballon = null;\n    unLockBallon = false\n    isCountDown = false;\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n\n        GameView.instance = this;\n        //this.createObstacle();\n        //this.genObstacle_2();\n        Global.unlockIndexBallon = JSON.parse(cc.sys.localStorage.getItem('unlockIndexBallon')) || Global.unlockIndexBallon;\n        console.log(\"index \", Global.unlockIndexBallon);\n        Global.currentIndexBallon = JSON.parse(cc.sys.localStorage.getItem('currentIndexBallon')) || 0;\n        this.ballon = cc.instantiate(this.prfBallon).getComponent(Ballon)\n        this.ballon.node.y = -420;\n        this.ballon.setData(Global.currentIndexBallon)\n        this.nBallon.addChild(this.ballon.node);\n        this.genObstacle();\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n        this.handsDestroy()\n        this.resetGame();\n\n    }\n\n    start() {\n\n    }\n\n    startTimeResume() {\n        this.lbTimeResume.node.active = true;\n        this.isCountDown = true;\n        this.schedule(this.updateTimeResume,1);\n    }\n\n    updateTimeResume() {\n        if(this.timeResume > 0) {\n            this.timeResume--;\n            this.lbTimeResume.string = this.timeResume + \" \";\n        }else {\n            this.isCountDown = false;\n            this.isGameOver = false;\n            this.lbTimeResume.node.active = false;\n        }\n    }\n    \n    createObstacle(node: cc.Node) {\n\n        for (let i = 0; i < 2; i++) {\n            let index = Math.floor(Math.random() * this.listPrfObstacle.length);\n            let obstacle = cc.instantiate(this.listPrfObstacle[index]);\n            let obstacleComponent = obstacle.getComponent(obstacleManager);\n            if (obstacleComponent) {\n                obstacle = obstacleComponent.node;\n            }\n            obstacle.y = -340 + i * 680;\n            node.addChild(obstacle);\n        }\n    }\n\n    genObstacle() {\n        for (let i = 0; i < 3; i++) {\n            this.createObstacle(this.listBg[i]);\n        }\n    }\n    onTouchStart() {\n        this.startGame();\n    }\n\n    startGame() {\n        if (!this.isFirstTouch) {\n            this.isFirstTouch = true;\n            this.schedule(this.updateTime, 1);\n            this.handsDestroy();\n        } else {\n            this.fall();\n           \n        }\n    }\n\n    handsDestroy() {\n        if (!this.isFirstTouch) return;\n\n        this.scheduleOnce(() => {\n            if (!this.isGameOver) { // Chỉ thực hiện khi game không bị tạm dừng\n                this.hands.active = false;\n            }\n        }, 3.5);\n    }\n\n    fall() {\n        if (this.isGameOver) return;\n        cc.tween(this.ballon.node)\n            .by(0.2, { y: -80 })\n            .start();\n    }\n\n\n    updateTime() {\n        if (this.isFirstTouch && !this.isGameOver) {\n            this.time += 1;\n            this.updateLbTime(this.lbTime);\n            this.updateLbScore(this.lbScore);\n        }\n    }\n    updateLbDiamond(lbDiamond) {\n        lbDiamond.string = Global.diaMond + ' ';\n        this.updateLbScore(this.lbScore);\n    }\n\n    updateLbTime(lbTime: cc.Label) {\n        lbTime.string = this.time + ' ';\n    }\n\n    updateLbScore(lbScore: cc.Label) {\n        lbScore.string = this.time + Global.diaMond + ' ';\n    }\n\n    resetGame() {\n        Global.diaMond = 0;\n        Global.score = 0;\n        this.time = 0;\n        this.updateLbScore(this.lbScore);\n        this.updateLbTime(this.lbTime);\n        this.updateLbDiamond(this.lbDiamond);\n        this.ballon.node.active = true;\n        this.ballon.node.y = -420;\n        cc.director.getCollisionManager().enabled = true;\n        this.isFirstTouch = false;\n        this.isGameOver = false;\n        this.listBg.forEach(value => {\n            value.removeAllChildren();\n        })\n        this.hands.active = true;\n        this.listBg[0].y = 3120;\n        this.listBg[1].y = 1840;\n        this.listBg[2].y = 560;\n        this.listBg[3].y = -720;\n        this.listBg[3].active = true;\n        this.genObstacle();\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n    }\n\n    gameOver() {\n\n        this.isGameOver = true;\n        this.hands.active = false\n        let gameOver = cc.instantiate(this.prfGameOver).getComponent(GameOver).node\n        this.unschedule(this.updateTime);\n        cc.tween(this.ballon).stop();\n        this.node.off(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n        cc.director.getCollisionManager().enabled = false;\n        let scores = this.time + Global.diaMond;\n        this.unLockBallon = false\n        let MAX_SCORES = 10;\n\n        Global.dataScore.push(scores);\n        Global.dataScore.sort((a, b) => {\n            return a > b ? -1 : 1;\n        });\n\n        if (Global.dataScore.length > MAX_SCORES) {\n            Global.dataScore = Global.dataScore.slice(0, MAX_SCORES);\n        }\n        console.log('save', Global.dataScore)\n        cc.sys.localStorage.setItem('scores', JSON.stringify(Global.dataScore));\n        if (scores >= Global.unlockPoints[Global.unlockIndexBallon + 1]) {\n            Global.unlockIndexBallon++;\n            this.unLockBallon = true;\n            cc.sys.localStorage.setItem('unlockIndexBallon', Global.unlockIndexBallon);\n            console.log(\"unLockIndex \", Global.unlockIndexBallon);\n        }\n        this.ballon.node.active = false;\n        this.scheduleOnce(() => {\n            this.node.addChild(gameOver);\n        }, 0.3)\n\n\n    }\n\n    pauseGame() {\n        this.isGameOver = true;\n        let pauseGame = cc.instantiate(this.prfPause).getComponent(Pause)\n        this.node.addChild(pauseGame.node);\n    }\n\n    gameDestroy() {\n        this.node.destroy();\n    }\n    update(dt) {\n        if (this.isGameOver) return;\n        if (this.isFirstTouch) {\n            this.ballon.node.setPosition(this.ballon.node.position.x, this.ballon.node.position.y + 180 * dt, 0);\n        }\n    }\n}\n"]}