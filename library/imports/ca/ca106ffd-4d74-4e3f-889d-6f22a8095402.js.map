{"version":3,"sources":["assets\\InfiniteHeights\\scripts\\Game\\InfiniteHeights.Shop.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { Global } from \"../InfiniteHeights.Global\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Shop extends cc.Component {\r\n\r\n    public static instance: Shop = null;\r\n    @property(cc.SpriteFrame)\r\n    listSpfBallon: cc.SpriteFrame[] = [];\r\n\r\n    @property(cc.Sprite)\r\n    nBallon_0: cc.Sprite = null;\r\n\r\n    @property(cc.Sprite)\r\n    nBallon_1: cc.Sprite = null;\r\n\r\n    @property(cc.Sprite)\r\n    nBallon_2: cc.Sprite = null;\r\n\r\n    @property(cc.Node)\r\n    nNext: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    nPrev: cc.Node = null;\r\n\r\n    onLoad() {\r\n        Shop.instance = this;\r\n        Global.unlockIndexBallon = JSON.parse(cc.sys.localStorage.getItem('unlockIndexBallon')) || Global.unlockIndexBallon;\r\n        console.log(\"unLockIndex \", Global.unlockIndexBallon);\r\n        console.log(\"indexBallon\", Global.currentIndexBallon);\r\n        this.updateShop()\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    // onNext() {\r\n    //     Global.currentIndexBallon++;\r\n    //     console.log(\"OnNext \", Global.currentIndexBallon);\r\n    //     if (Global.currentIndexBallon > Global.unlockIndexBallon)\r\n    //         Global.currentIndexBallon = Global.unlockIndexBallon;\r\n    //     this.updateShop()\r\n    // }\r\n\r\n    // onPrev() {\r\n    //     Global.currentIndexBallon--;\r\n    //     console.log(\"OnPrev \", Global.currentIndexBallon);\r\n    //     if (Global.currentIndexBallon < 0)\r\n    //         Global.currentIndexBallon = 0;\r\n\r\n    //     this.updateShop()\r\n    // }\r\n\r\n    onNext() {\r\n        if (Global.currentIndexBallon < Global.unlockPoints.length - 1) {\r\n            Global.currentIndexBallon++;\r\n            this.updateShop();\r\n            console.log(\"OnNext \", Global.currentIndexBallon);\r\n            cc.sys.localStorage.setItem('currentIndexBallon', Global.currentIndexBallon);\r\n        }else {\r\n            this.nNext.active = false;\r\n            console.log(\"sdasd\")\r\n        }\r\n    }\r\n    \r\n    onPrev() {\r\n        if (Global.currentIndexBallon > 0) {\r\n            Global.currentIndexBallon--;\r\n            this.updateShop();\r\n            console.log(\"OnPrev \", Global.currentIndexBallon);\r\n            cc.sys.localStorage.setItem('currentIndexBallon', Global.currentIndexBallon);\r\n        }\r\n    }\r\n\r\n    updateShop() {\r\n        // neu currentIndexBallon == 0 => an button Previous, Ballon 0\r\n        // neu currentIndexBallon > 0 && < unlockIndexBallon => xu ly gi\r\n        // neu currentIndexBallon == unlockIndexBallon =>an button Next, Ballon 2\r\n\r\n        this.nBallon_1.spriteFrame = this.listSpfBallon[Global.currentIndexBallon]\r\n        if (Global.currentIndexBallon === 0) {\r\n            this.nPrev.active = false;\r\n            this.nNext.active = true;\r\n            this.nBallon_0.node.active = false; \r\n    \r\n            if (Global.unlockIndexBallon > 0) {\r\n                this.nBallon_2.node.active = true;\r\n                this.nBallon_2.spriteFrame = this.listSpfBallon[Global.currentIndexBallon + 1];\r\n            } else {\r\n                this.nBallon_2.node.active = false;\r\n            }\r\n        } \r\n\r\n\r\n        else if (Global.currentIndexBallon === Global.unlockIndexBallon) {\r\n            this.nPrev.active = true;   \r\n            this.nNext.active = false;\r\n            this.nBallon_0.node.active = true;\r\n            this.nBallon_0.spriteFrame = this.listSpfBallon[Global.currentIndexBallon - 1];\r\n            this.nBallon_2.node.active = false;\r\n        } \r\n        else if (Global.currentIndexBallon > 0 && Global.currentIndexBallon < Global.unlockIndexBallon) {\r\n            this.nPrev.active = true; \r\n            this.nNext.active = true;   \r\n            this.nBallon_0.node.active = true;\r\n            this.nBallon_2.node.active = true;\r\n            this.nBallon_0.spriteFrame = this.listSpfBallon[Global.currentIndexBallon - 1];\r\n            this.nBallon_2.spriteFrame = this.listSpfBallon[Global.currentIndexBallon + 1];\r\n        }\r\n    \r\n    \r\n        if (Global.currentIndexBallon > Global.unlockIndexBallon) {\r\n            Global.currentIndexBallon = Global.unlockIndexBallon;\r\n            this.updateShop();\r\n        }\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}