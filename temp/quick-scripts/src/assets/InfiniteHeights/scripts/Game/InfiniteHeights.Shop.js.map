{"version":3,"sources":["assets/InfiniteHeights/scripts/Game/InfiniteHeights.Shop.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { Global } from \"../InfiniteHeights.Global\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Shop extends cc.Component {\n\n    public static instance: Shop = null;\n    @property(cc.SpriteFrame)\n    listSpfBallon: cc.SpriteFrame[] = [];\n\n    @property(cc.Sprite)\n    nBallon_0: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    nBallon_1: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    nBallon_2: cc.Sprite = null;\n\n    @property(cc.Node)\n    nNext: cc.Node = null;\n\n    @property(cc.Node)\n    nPrev: cc.Node = null;\n\n    onLoad() {\n        Shop.instance = this;\n        Global.currentIndexBallon = JSON.parse(cc.sys.localStorage.getItem('currentIndexBallon')) || 0 ;\n        console.log(\"currentIndexBallon \", Global.currentIndexBallon);\n        Global.unlockIndexBallon = JSON.parse(cc.sys.localStorage.getItem('unlockIndexBallon')) || Global.unlockIndexBallon;\n        this.effectBallon(this.nBallon_0.node)\n        this.effectBallon(this.nBallon_1.node)\n        this.effectBallon(this.nBallon_2.node)\n        console.log(\"unLockIndex \", Global.unlockIndexBallon);\n        console.log(\"indexBallon\", Global.currentIndexBallon);\n        this.updateShop()\n    }\n\n    start() {\n\n    }\n\n   \n    effectBallon(node: cc.Node) {\n        cc.tween(node)\n        .repeatForever(\n            cc.tween()\n            .to(0.8, {angle:-10})\n            .to(0.9, {angle: 10})\n            .start()\n        ).start()\n    }\n    onNext() {\n        if (Global.currentIndexBallon < Global.unlockPoints.length - 1) {\n            Global.currentIndexBallon++;\n            this.updateShop();\n            console.log(\"OnNext \", Global.currentIndexBallon);\n            cc.sys.localStorage.setItem('currentIndexBallon', Global.currentIndexBallon);\n        }else {\n            this.nNext.active = false;\n            console.log(\"sdasd\")\n        }\n    }\n    \n    onPrev() {\n        if (Global.currentIndexBallon > 0) {\n            Global.currentIndexBallon--;\n            this.updateShop();\n            console.log(\"OnPrev \", Global.currentIndexBallon);\n            cc.sys.localStorage.setItem('currentIndexBallon', Global.currentIndexBallon);\n        }\n    }\n\n    updateShop() {\n        // neu currentIndexBallon == 0 => an button Previous, Ballon 0\n        // neu currentIndexBallon > 0 && < unlockIndexBallon => xu ly gi\n        // neu currentIndexBallon == unlockIndexBallon =>an button Next, Ballon 2\n\n        this.nBallon_1.spriteFrame = this.listSpfBallon[Global.currentIndexBallon]\n        if (Global.currentIndexBallon === 0) {\n            this.nPrev.active = false;\n            this.nNext.active = false;\n            this.nBallon_0.node.active = false; \n    \n            if (Global.unlockIndexBallon > 0) {\n                this.nBallon_2.node.active = true;\n                this.nNext.active = true;\n                this.nBallon_2.spriteFrame = this.listSpfBallon[Global.currentIndexBallon + 1];\n            } else {\n                this.nBallon_2.node.active = false;\n            }\n        } \n\n\n        else if (Global.currentIndexBallon === Global.unlockIndexBallon) {\n            this.nPrev.active = true;   \n            this.nNext.active = false;\n            this.nBallon_0.node.active = true;\n            this.nBallon_0.spriteFrame = this.listSpfBallon[Global.currentIndexBallon - 1];\n            this.nBallon_2.node.active = false;\n        } \n        else if (Global.currentIndexBallon > 0 && Global.currentIndexBallon < Global.unlockIndexBallon) {\n            this.nPrev.active = true; \n            this.nNext.active = true;   \n            this.nBallon_0.node.active = true;\n            this.nBallon_2.node.active = true;\n            this.nBallon_0.spriteFrame = this.listSpfBallon[Global.currentIndexBallon - 1];\n            this.nBallon_2.spriteFrame = this.listSpfBallon[Global.currentIndexBallon + 1];\n        }\n    \n    \n        if (Global.currentIndexBallon > Global.unlockIndexBallon) {\n            Global.currentIndexBallon = Global.unlockIndexBallon;\n            this.updateShop();\n        }\n    }\n    // update (dt) {}\n}\n"]}